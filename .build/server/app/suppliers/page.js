(()=>{var e={};e.id=9597,e.ids=[9597],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},86551:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>i.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>o,routeModule:()=>m,tree:()=>c}),a(3607),a(32694),a(71363);var r=a(36576),t=a(72007),n=a(21818),i=a.n(n),l=a(88897),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);a.d(s,d);let c=["",{children:["suppliers",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,3607)),"/home/ubuntu/supermarket_pos_system/nextjs_space/app/suppliers/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,32694)),"/home/ubuntu/supermarket_pos_system/nextjs_space/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,71363,23)),"next/dist/client/components/not-found-error"]}],o=["/home/ubuntu/supermarket_pos_system/nextjs_space/app/suppliers/page.tsx"],p="/suppliers/page",u={require:a,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:t.x.APP_PAGE,page:"/suppliers/page",pathname:"/suppliers",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},12230:(e,s,a)=>{Promise.resolve().then(a.bind(a,50345))},50345:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>P});var r=a(62901),t=a(24383),n=a(84700),i=a(73735),l=a(92861),d=a(23415),c=a(23803),o=a(27878),p=a(250),u=a(82657),m=a(31606),x=a(76556),h=a(72405),j=a(97718),y=a(91046),v=a(57234),g=a(48119),_=a(43921);function P(){let{data:e}=(0,n.useSession)()||{},[s,a]=(0,t.useState)([]),[P,C]=(0,t.useState)(""),[f,N]=(0,t.useState)(!1),[S,T]=(0,t.useState)(null),[b,k]=(0,t.useState)({code:"",name:"",contactPerson:"",email:"",phone:"",address:"",city:"",country:"",paymentTerms:"",leadTimeDays:7}),w=e?.user?.role||"",A=w&&(0,g.Fs)(w,"MANAGE_SUPPLIERS"),I=async()=>{let e=await fetch("/api/suppliers");e.ok&&a(await e.json())},q=async e=>{e.preventDefault();let s=S?`/api/suppliers/${S.id}`:"/api/suppliers";(await fetch(s,{method:S?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)})).ok?(_.Am.success(S?"Supplier updated":"Supplier created"),N(!1),T(null),k({code:"",name:"",contactPerson:"",email:"",phone:"",address:"",city:"",country:"",paymentTerms:"",leadTimeDays:7}),I()):_.Am.error("Failed to save supplier")},D=e=>{T(e),k({code:e.code,name:e.name,contactPerson:e.contactPerson||"",email:e.email||"",phone:e.phone||"",address:e.address||"",city:e.city||"",country:e.country||"",paymentTerms:e.paymentTerms||"",leadTimeDays:e.leadTimeDays}),N(!0)},E=s.filter(e=>e.name.toLowerCase().includes(P.toLowerCase())||e.code.toLowerCase().includes(P.toLowerCase()));return r.jsx(i.I,{children:(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[r.jsx(l.W,{}),r.jsx(d.FE,{children:(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-xl font-bold",children:"Suppliers"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage your product suppliers"})]}),A&&(0,r.jsxs)(x.Vq,{open:f,onOpenChange:N,children:[r.jsx(x.hg,{asChild:!0,children:(0,r.jsxs)(o.z,{onClick:()=>{T(null),k({code:"",name:"",contactPerson:"",email:"",phone:"",address:"",city:"",country:"",paymentTerms:"",leadTimeDays:7})},children:[r.jsx(j.Z,{className:"w-4 h-4 mr-2"})," Add Supplier"]})}),(0,r.jsxs)(x.cZ,{className:"max-w-2xl",children:[r.jsx(x.fK,{children:r.jsx(x.$N,{children:S?"Edit Supplier":"Add Supplier"})}),(0,r.jsxs)("form",{onSubmit:q,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx(u._,{children:"Supplier Code*"}),r.jsx(p.I,{value:b.code,onChange:e=>k({...b,code:e.target.value}),required:!0})]}),(0,r.jsxs)("div",{children:[r.jsx(u._,{children:"Name*"}),r.jsx(p.I,{value:b.name,onChange:e=>k({...b,name:e.target.value}),required:!0})]}),(0,r.jsxs)("div",{children:[r.jsx(u._,{children:"Contact Person"}),r.jsx(p.I,{value:b.contactPerson,onChange:e=>k({...b,contactPerson:e.target.value})})]}),(0,r.jsxs)("div",{children:[r.jsx(u._,{children:"Email"}),r.jsx(p.I,{type:"email",value:b.email,onChange:e=>k({...b,email:e.target.value})})]}),(0,r.jsxs)("div",{children:[r.jsx(u._,{children:"Phone"}),r.jsx(p.I,{value:b.phone,onChange:e=>k({...b,phone:e.target.value})})]}),(0,r.jsxs)("div",{children:[r.jsx(u._,{children:"Payment Terms"}),r.jsx(p.I,{value:b.paymentTerms,onChange:e=>k({...b,paymentTerms:e.target.value}),placeholder:"e.g., Net 30"})]}),(0,r.jsxs)("div",{children:[r.jsx(u._,{children:"Lead Time (days)"}),r.jsx(p.I,{type:"number",value:b.leadTimeDays,onChange:e=>k({...b,leadTimeDays:parseInt(e.target.value)||7})})]}),(0,r.jsxs)("div",{children:[r.jsx(u._,{children:"City"}),r.jsx(p.I,{value:b.city,onChange:e=>k({...b,city:e.target.value})})]}),(0,r.jsxs)("div",{className:"col-span-2",children:[r.jsx(u._,{children:"Address"}),r.jsx(p.I,{value:b.address,onChange:e=>k({...b,address:e.target.value})})]})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-2",children:[r.jsx(o.z,{type:"button",variant:"outline",onClick:()=>N(!1),children:"Cancel"}),r.jsx(o.z,{type:"submit",children:S?"Update":"Create"})]})]})]})]})]}),(0,r.jsxs)(c.Zb,{children:[r.jsx(c.Ol,{children:(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[r.jsx(y.Z,{className:"w-4 h-4 text-muted-foreground"}),r.jsx(p.I,{placeholder:"Search suppliers...",value:P,onChange:e=>C(e.target.value),className:"max-w-sm"})]})}),r.jsx(c.aY,{children:(0,r.jsxs)(h.iA,{children:[r.jsx(h.xD,{children:(0,r.jsxs)(h.SC,{children:[r.jsx(h.ss,{children:"Code"}),r.jsx(h.ss,{children:"Name"}),r.jsx(h.ss,{children:"Contact"}),r.jsx(h.ss,{children:"Payment Terms"}),r.jsx(h.ss,{children:"Lead Time"}),r.jsx(h.ss,{children:"Products"}),r.jsx(h.ss,{children:"Status"}),A&&r.jsx(h.ss,{children:"Actions"})]})}),r.jsx(h.RM,{children:E.map(e=>(0,r.jsxs)(h.SC,{children:[r.jsx(h.pj,{className:"font-mono",children:e.code}),r.jsx(h.pj,{className:"font-medium",children:e.name}),(0,r.jsxs)(h.pj,{children:[r.jsx("div",{className:"text-sm",children:e.contactPerson}),r.jsx("div",{className:"text-xs text-muted-foreground",children:e.email})]}),r.jsx(h.pj,{children:e.paymentTerms||"-"}),(0,r.jsxs)(h.pj,{children:[e.leadTimeDays," days"]}),r.jsx(h.pj,{children:e._count?.products||0}),r.jsx(h.pj,{children:r.jsx(m.C,{variant:e.isActive?"default":"secondary",children:e.isActive?"Active":"Inactive"})}),A&&r.jsx(h.pj,{children:r.jsx(o.z,{variant:"ghost",size:"sm",onClick:()=>D(e),children:r.jsx(v.Z,{className:"w-4 h-4"})})})]},e.id))})]})})]})]})})]})})}},91046:(e,s,a)=>{"use strict";a.d(s,{Z:()=>r});let r=(0,a(71945).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},57234:(e,s,a)=>{"use strict";a.d(s,{Z:()=>r});let r=(0,a(71945).Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},3607:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>r});let r=(0,a(88895).createProxy)(String.raw`/home/ubuntu/supermarket_pos_system/nextjs_space/app/suppliers/page.tsx#default`)}};var s=require("../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),r=s.X(0,[4372,879,9121,5959,4542,4566,3414],()=>a(86551));module.exports=r})();